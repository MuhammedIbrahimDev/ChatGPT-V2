<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OpenAI Chat Assistant</title>
  <link rel="stylesheet" href="./CSS/bootstrap.rtl.min.css">
  <script src="./JS/bootstrap.bundle.min.js"></script>

  <link rel="stylesheet" href="./CSS/style.css">
  <script src="./JS/marked.min.js"></script>  
</head>
<body>
  <div class="chat-box d-flex flex-column">
    <div class="chat-header d-flex justify-content-between align-items-center">
  <button class="btn btn-secondary btn-sm" id="newChatInputSection" style="display: none;" data-bs-toggle="modal" data-bs-target="#newChatModal">
    🆕 محادثة جديدة
  </button>
    <div> (المحترف) ChatGPT 🤖</div>

</div>

    <div class="chat-messages" id="chatBox"></div>
    <div class="chat-input" id="inputSection" style="display: none;">
      <div class="mb-2">
        <textarea class="form-control" id="messageInput" rows="2" placeholder="اكتب رسالتك..."></textarea>
      </div>
      <div class="d-flex justify-content-between align-items-center">
        <!-- hidden file inputs -->
<input type="file" id="imageInput" accept="image/*" style="display:none">
<input type="file" id="fileInput" accept=".pdf,.txt,.csv,.tsv,.xls,.xlsx,.docx,.md,.json" style="display:none">

<!-- icon buttons -->
<div class="d-flex gap-2 align-items-center">
  <!-- gallery icon (opens imageInput) -->
  <label for="imageInput" class="file-btn" title="رفع صورة" aria-label="رفع صورة">
    <!-- simple gallery SVG -->
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
      <rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" stroke-width="1.5"></rect>
      <circle cx="8.5" cy="9" r="1.2" fill="currentColor"></circle>
      <path d="M21 18l-5-6-4 5-3-4-4 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
  </label>

  <!-- pin/attach icon (opens fileInput) -->
  <label for="fileInput" class="file-btn" title="إرفاق ملف" aria-label="إرفاق ملف">
    <!-- simple pin/paperclip SVG -->
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
      <path d="M21.44 11.05l-8.49 8.49a5.5 5.5 0 0 1-7.78-7.78l8.49-8.49a4 4 0 1 1 5.66 5.66l-8.49 8.49a2.5 2.5 0 1 1-3.54-3.54l7.07-7.07" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </label>

  <!-- optional: show chosen filename -->
  <small id="fileName" class="text-truncate" style="max-width:140px;direction:ltr;"></small>
</div>
        <div>
          <button class="btn btn-primary btn-sm fixed-send-btn" disabled id="sendBtn" onclick="sendMessage()">إرسال</button>
        </div>
        
            
      </div>
    </div>
    <div class="p-3 text-center" id="newChatSection">
      <button class="btn btn-secondary" onclick="createNewThread()">🆕 محادثة جديدة</button>
    </div>
  </div>

  <!-- Modal: تأكيد محادثة جديدة -->
  <div class="modal fade" id="newChatModal" tabindex="-1" aria-labelledby="newChatModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="newChatModalLabel">بدء محادثة جديدة</h5>
        </div>
        <div class="modal-body text-center">
          هل أنت متأكد أنك تريد بدء محادثة جديدة؟ سيتم مسح المحادثة الحالية.
        </div>
        <div class="modal-footer justify-content-center">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">لا</button>
          <button type="button" class="btn btn-secondary fs-6"  onclick="startNewChat()">نعم</button>
        </div>
      </div>
    </div>
  </div>


  <script src="./JS/bootstrap.bundle.min.js"></script>
  <script src="./JS/script.js"></script>


</body>
</html>
